/*******************************************************************************
 * 신상품 등록 validation 체크
 ******************************************************************************/

		function selectTargetObject(currentObj) {
			var tmpObject = currentObj;
			var currentNodeTagName = currentObj.parent().get(0).nodeName.toLowerCase();
			if(currentNodeTagName  == 'div') {
				tmpObject = currentObj.parent();
			}
			return tmpObject;
		}
	

		function showErrorMessage(currentObject) {
			var targetObject = selectTargetObject(currentObject); 
			
			var fieldHeaderText = targetObject.parent().prev().text().replace("*","");
			var errorNode = targetObject.prev("div[name=error_msg]").length;
			var fullErrorMessage = getTextMessageWithArgu(fieldHeaderText);
			
			if(currentObject.hasClass("number")) {
//alert("number");
				fullErrorMessage = getNumberMessageWithArgu(fieldHeaderText);
			
				
				
//alert(fullErrorMessage);

				var currentObjectValue = currentObject.val();
//alert(currentObjectValue);				
				if(currentObjectValue == "0")
					fullErrorMessage = fieldHeaderText+"에는 0보다 큰 값을 입력해주시기 바랍니다.";
//alert(currentObject.hasClass());				
				if( currentObject.hasClass("range") &&
						( currentObjectValue != '' && parseInt(currentObjectValue) > 0) ) {
					if( currentObject.hasClass("cost") ) {
						fullErrorMessage = "원가가 매가 보다 값이 클수 없습니다.";
					}
					if( currentObject.hasClass("maximum") ) {
						fullErrorMessage = "최소 주문량이 최대 주문량 보다 클수 없습니다.";
					}
				}
				
				if( currentObject.hasClass("vicrange") &&
						( currentObjectValue != '' && parseInt(currentObjectValue) > 0) ) {
					if( currentObject.hasClass("viccost") ) {
						fullErrorMessage = "VIC 원가가  VIC 매가 보다 값이 클수 없습니다.";
					}
					
				}
				
			}
			
			if( errorNode == 0 ) { 
				$("<div name=\"error_msg\" style=\"color:red;\">"
					+fullErrorMessage+
				 "</div>")
				 .insertBefore(targetObject);
			}
		}

		function deleteErrorMessageIfExist(currentObject) {
	//alert("11111");
			if(!currentObject.hasClass("userValueValidate")) {
	//alert("22222");
				var targetObject = selectTargetObject(currentObject); 
				
				var errorNode = targetObject.prev("div[name=error_msg]").length;
				if( errorNode > 0 ) { 
					targetObject.prev().remove();
				}
			}
		}
	
		function validateSelectBox(selectBoxObj) {
		//	alert("ven_Cd");
			if( selectBoxObj.val() == '' ||
					selectBoxObj.val() == 'all') {
//alert("ven_Cd1");				
				showErrorMessage(selectBoxObj);
			} else {
//alert("ven_Cd2");				
				deleteErrorMessageIfExist(selectBoxObj);
			}
		}
	
		function checkRangeValue(fieldObj) {
			var resultFlag = "success";
			//원가는 매가보다 클수 없음.
			if(fieldObj.hasClass("cost")) 
			{
				var price = parseInt($(".price").val());
				var cost  = parseInt($(".cost").val());
				
				if( cost >= price ) {
					resultFlag = "cost";
					
				} 
			}
			if(fieldObj.hasClass("viccost")) 
			{
				var vicprice = parseInt($(".vicprice").val());
				var viccost  = parseInt($(".viccost").val());
				
				if( viccost >= vicprice ) {
					resultFlag = "viccost";
				} 
			}
			
			
			//최소 주문은 최대 주문보다 클수 없음
			if(fieldObj.hasClass("maximum")) 
			{
				var minimum = parseInt($(".minimum").val());
				var maximum  = parseInt($(".maximum").val());
				
				if( minimum >= maximum ) {
					
					resultFlag = "maximum";
				} 
			}
			
			return resultFlag;
		}
		
		function validateTextField(textFieldObj) {
//			alert("123");
//alert(textFieldObj);			
			var currentNodeValue = textFieldObj.val();
			var limit_char = /[~!\#$^&*\=+|:;?"<,>']/;
			
			//숫자(소수점 없는 정수)만 입력하는 경우
			if(textFieldObj.hasClass("number")) {
				if( !checkNumber(currentNodeValue) ) {
//alert("number");	
//alert(textFieldObj);
					showErrorMessage(textFieldObj);
				
				//숫자 0만 입력한 경우	
				} else if( parseInt(currentNodeValue) == 0 ) {
//alert("123456");						
					showErrorMessage(textFieldObj);
					
				//숫자를 입력한 경우	
				}  else {
//alert("1234567");			
					//비교값 체크(예: 최대, 최소 값 비교 혹은 상품의 원가 매가 금액 비교

//alert(checkRangeValue(textFieldObj));
//alert(textFieldObj);

					if( textFieldObj.hasClass("range") && checkRangeValue(textFieldObj) != "success"	) {
//alert("12345678");	

							showErrorMessage(textFieldObj);
					} else if(textFieldObj.hasClass("vicrange") && checkRangeValue(textFieldObj) != "success")
					{	
//alert("123456789");							
						showErrorMessage(textFieldObj);
					} else {
//alert("1234567890");						
						deleteErrorMessageIfExist(textFieldObj);
					}
				}
				
			//비율, 소수점을 포함한 숫자를 입력한 경우	
			} else if(textFieldObj.hasClass("rate")) {
			//	alert("leedb1");
				if( !checkMinus(currentNodeValue) ) {
					showErrorMessage(textFieldObj);
				} else {
					deleteErrorMessageIfExist(textFieldObj);
				}
			//비율, 소수점을 포함한 숫자를 입력한 경우	
			} else if(textFieldObj.hasClass("vicrate")) {
				if( !checkMinus(currentNodeValue) ) {
					showErrorMessage(textFieldObj);
				} else {
					deleteErrorMessageIfExist(textFieldObj);
				}
				
			//숫자가 아닌 일반 문자를 입력한 경우	
			} else  {
				
				if( !checkText(currentNodeValue) ) {
					showErrorMessage(textFieldObj);
				} 
				/*
				else if( limit_char.test(currentNodeValue) ) {
					textFieldObj.prev("div[name=error_msg]").remove();
					generateMessage(textFieldObj, "특수문자는 입력할수 없습니다.");
				} 
				*/
				else  {
					deleteErrorMessageIfExist(textFieldObj);
				}
				  
			}
		}
	
		function validateRadioField(jqueryObj) {
			var currentNodeName = jqueryObj.attr("name");
			var errorDiv = jqueryObj.parent().prev("div[name=error_msg]").length;
			
			if( $("input[name="+currentNodeName+"]:checked").length == 0 ) {
					
				showErrorMessage(jqueryObj);
			} else {
				$("#"+currentNodeName).val($("input[name="+currentNodeName+"]:checked").val());
				deleteErrorMessageIfExist(jqueryObj);
			}
	
		}
	
		function validateCommon() {
			var validateFlag = true;
			$(".required").each(function() {
				if(!$(this).attr("disabled")) {
					var currentNodeTagName = $(this).get(0).nodeName.toLowerCase();
					var errorNode = $(this).prev("div[name=error_msg]").length;
					var currentNodeValue = $(this).val();
					switch(currentNodeTagName) {
						case "select" :
							if( currentNodeValue == '' ||
									currentNodeValue == 'all' ) {
								showErrorMessage($(this));
								validateFlag = false;
							} else {
								deleteErrorMessageIfExist($(this));
							}
						break;
						default :
							//input text박스인 경우
							if($(this).attr("type") == 'text') {

								//validateTextField($(this));
								
								if($(this).hasClass("number")) {
									if( !checkNumber($(this).val()) ) {
										showErrorMessage($(this));
										validateFlag = false;
									} else if( parseInt($(this).val()) == 0 ) {
										showErrorMessage($(this));
										validateFlag = false;
									} else {
										//비교값 체크(예: 최대, 최소 값 비교 혹은 상품의 원가 매가 금액 비교
										
										if( $(this).hasClass("range") &&
												checkRangeValue($(this))  != "success"	) {
											
											showErrorMessage($(this));
											validateFlag = false;
										} else {
											deleteErrorMessageIfExist($(this));
										}
										//deleteErrorMessageIfExist($(this));
									}
								} else if($(this).hasClass("rate")) {
									
								//	alert("test1");
									
									if( !checkMinus($(this).val()) ) {
										showErrorMessage($(this));
										validateFlag = false;
									} else {
										deleteErrorMessageIfExist($(this));
									}
									
									//이동빈추가시작
								} else if($(this).hasClass("vicrate")) {
									if( !checkMinus($(this).val()) ) {
										showErrorMessage($(this));
										validateFlag = false;
									} else {
										deleteErrorMessageIfExist($(this));
									}
									//이동빈추가끝
								} else {
									if( !checkText($(this).val()) ) {
										showErrorMessage($(this));
										validateFlag = false;
									} else {
										deleteErrorMessageIfExist($(this));
									}
								}
								
							//radio 버튼인 경우	
							} else {
								var currentNodeName = $(this).attr("name");
								var errorDiv = $(this).parent().prev("div[name=error_msg]").length;
								if( $("input[name="+currentNodeName+"]:checked").length == 0 ) {
										showErrorMessage($(this));
										validateFlag = false;
								} else {
									deleteErrorMessageIfExist($(this));
								}
							}
						break;	
					}
				}
			});
			return validateFlag;
		}
	
		function checkMinus(checkValue) {
			var pattern = /^\-?[0-9]+(.[0-9]+)?$/;
	    	return pattern.test(checkValue) ? true : false;
		}
		
		function checkNumber(checkValue) {
			var pattern = /^[0-9]+(.[0-9]+)?$/;
	    	return  pattern.test(checkValue) ? true : false;
		}
	
		function checkInteger(checkValue) {
			var pattern = /^[0-9]+$/;
	    	return pattern.test(checkValue) ? true : false;
		}
		
		function checkText(checkValue) {
			var trimmedValue = checkValue.replace(/^\s*(\S*(\s+\S+)*)\s*$/, "$1");
			//alert(trimmedValue);
			
			if( checkValue == null || trimmedValue == ''  ) {
	    		return  false;
			} else {
		    	return  true;
			}
		}
		
		function isThisValidSell88Code(sellCodeElement) {
			var sell88CodeResult = true;
			if (sellCodeElement.value != "" )/*88 상품 코리안넷으로 등록*/
			{
			
			//alert(document.Myform.ll_list.value);
			//	if(
			//	document.Myform.ll_list.value != "40" && document.Myform.ll_list.value != "61" && document.Myform.ll_list.value != "62" && document.Myform.ll_list.value != "63" && document.Myform.ll_list.value != "64" && document.Myform.ll_list.value != "38")
			//	//document.Myform.ll_list.value != "")
			//	
			//	{
			//		alert("규격상품은 코리안넷을 통하여 등록하여 주시기 바랍니다..(세부내용_공지사항 참조)");
			//		return false;
			//	}
				
				
			}
		var ls_chk_dgt, li_cnt, lc_dgt, ll_sum, ll_buf , a_srcmk_cd_str
		ll_sum = 0

			if (sellCodeElement.value == ""){}
				else{
				if ((sellCodeElement.value.length) == 12) {
					a_srcmk_cd_str = "0" + sellCodeElement.value; 
					/*
					alert("판매코드는 13자리로 입력하셔야 합니다.");
					a_srcmk_cd.value = ""
					a_srcmk_cd.focus();
					*/
				}
				else{
				a_srcmk_cd_str = sellCodeElement.value;
				}
				//else{
					var lc_dgt_str
						lc_dgt_str = a_srcmk_cd_str.substring(0,12)
					
					for (li_cnt=1; li_cnt < 13; li_cnt++)
					{
						lc_dgt = lc_dgt_str.substring(li_cnt-1, li_cnt)
						
							if ((li_cnt)%2 == 1){
								ll_sum = ll_sum + parseInt(lc_dgt)}
							else{
								ll_sum = ll_sum + parseInt(lc_dgt) * 3
							}
					}
					

					ll_buf = parseInt(ll_sum) / 10
					ll_buf = (parseInt(ll_buf) + 1) * 10
					ls_chk_dgt = (parseInt(ll_buf) - parseInt(ll_sum))%10
					
				//}

				if (ls_chk_dgt != a_srcmk_cd_str.substring(12,13) ) {
				//alert("잘못된 판매코드를 입력하셨습니다.");
					//sellCodeElement.value= ""
					//sellCodeElement.focus();
					sell88CodeResult = false;
				}
				else {
				  //document.Myform.submit();
				}
			}
		
			return sell88CodeResult;
		}
		
		


		//
		//   입력 문자열 바이트 체크
		//   Obj, VMax
		function calByteProd(Obj, VMax, ObjName, nets)
		{ 
			var tmpStr;
			var temp=0;
			var onechar;
			var tcount;
			tcount = 0;
			var aquery = Obj.value
			
			tmpStr = new String(aquery);
			temp = tmpStr.length;

			for (k=0;k<temp;k++)
			{
				onechar = tmpStr.charAt(k);

				if (escape(onechar).length > 4)
				{
					tcount += 2;
				}
				else tcount ++;
				
				/*
				else if (onechar!='\r')
				{
					tcount++;
				}onkeyup
				*/		
			}
			
			if(tcount>VMax)
			{
				reserve = tcount-VMax;
				if(nets){
					
					alert(ObjName+"은(는) "+VMax+"바이트 이상은 전송하실수 없습니다.\r\n 쓰신 메세지는 "+reserve+"바이트가 초과되었습니다.\r\n 초과된 부분은 자동으로 삭제됩니다."); 
					netsCheckProd(Obj, VMax);
				}
				else{
					alert(ObjName+"은(는) "+VMax+"바이트 이상은 전송하실수 없습니다.\r\n 쓰신 메세지는 "+reserve+"바이트가 초과되었습니다."); 
					Obj.focus();
					Obj.value = aquery;
				}
				return false;
			}
			return true;
		}


		function netsCheckProd(Obj,lsMax)
		{
			var tmpStr;
			var temp=0;
			var onechar;
			var tcount;
			tcount = 0;

			var aquery = Obj.value;

			tmpStr = new String(aquery);
			temp = tmpStr.length;

			for(k=0;k<temp;k++)
			{
				onechar = tmpStr.charAt(k);
				
				if(escape(onechar).length > 4)
				{
					tcount += 2;
				}
				else tcount++;
				/*
				else if(onechar!='\r')
				{
					tcount++;
				}
				*/
				if(tcount>lsMax)
				{
					tmpStr = tmpStr.substring(0,k-1); 
					break;
				}
			}
			Obj.focus();
			Obj.value = tmpStr;
		}

		
		
/*    신상품 등록 validation 끝  //      */